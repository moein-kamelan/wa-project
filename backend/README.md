# WhatsApp Campaign Management API

ฺฉ ุณุณุชู ุฌุงูุน ุจุฑุง ูุฏุฑุช ฺฉููพูโูุง ูุงุชุณุงูพ ุจุง ูุงุจูุชโูุง ูพุดุฑูุชู ู ุฑุงุจุท ฺฉุงุฑุจุฑ ูุฏุฑู.

## ๐ ูฺฺฏโูุง ฺฉูุฏ

### ๐ฑ ูุฏุฑุช ฺฉููพูโูุง ูุงุชุณุงูพ
- **ุงุฌุงุฏ ฺฉููพู**: ุงุฌุงุฏ ฺฉููพูโูุง ุฌุฏุฏ ุจุง ูพุงูโูุง ุณูุงุฑุด
- **ุงุฑุณุงู ุงูุจูู**: ุงุฑุณุงู ูพุงู ุจู ูุฒุงุฑุงู ูุฎุงุทุจ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ
- **ูพูุณุชโูุง**: ูพุดุชุจุงู ุงุฒ ุงุฑุณุงู ูุงูโูุง ูุฎุชูู (ุชุตูุฑุ ูุฏูุ ุณูุฏ)
- **ุฒูุงูโุจูุฏ**: ูุงุจูุช ุฒูุงูโุจูุฏ ุงุฑุณุงู ูพุงูโูุง
- **QR Code**: ุงุชุตุงู ุงูู ุงุฒ ุทุฑู QR Code

### ๐ ุณุณุชู ุงุญุฑุงุฒ ููุช
- **OTP**: ุงุญุฑุงุฒ ููุช ุจุง ฺฉุฏ ฺฉุจุงุฑ ูุตุฑู
- **JWT**: ุณุณุชู ุชูฺฉูโูุง ุงูู
- **Session Management**: ูุฏุฑุช ุฌูุณุงุช ฺฉุงุฑุจุฑ
- **Role-based Access**: ุฏุณุชุฑุณ ุจุฑ ุงุณุงุณ ููุด ฺฉุงุฑุจุฑ

### ๐ณ ุณุณุชู ูพุฑุฏุงุฎุช
- **ูพฺฉุฌโูุง ุงุดุชุฑุงฺฉ**: ูพฺฉุฌโูุง ูุฎุชูู ุจุง ูุญุฏูุฏุช ูพุงู
- **ุฏุฑฺฏุงู ูพุฑุฏุงุฎุช**: ูพุดุชุจุงู ุงุฒ ุฏุฑฺฏุงูโูุง ูุฎุชูู
- **ูุฏุฑุช ุชุฑุงฺฉูุด**: ูพฺฏุฑ ฺฉุงูู ุชุฑุงฺฉูุดโูุง

### ๐ ฺฏุฒุงุฑุดโฺฏุฑ ู ุขูุงุฑ
- **ุขูุงุฑ ฺฉููพู**: ุขูุงุฑ ฺฉุงูู ุงุฑุณุงู ู ุชุญูู
- **ฺฏุฒุงุฑุด Excel**: ุฎุฑูุฌ ฺฏุฒุงุฑุดโูุง ุจู ุตูุฑุช Excel
- **Real-time Updates**: ุจูโุฑูุฒุฑุณุงู ูุญุธูโุง ูุถุนุช

### ๐ก๏ธ ุงููุช ู ุจูููโุณุงุฒ
- **Rate Limiting**: ูุญุฏูุฏุช ูุฑุฎ ุฏุฑุฎูุงุณุช
- **Input Validation**: ุงุนุชุจุงุฑุณูุฌ ูุฑูุฏโูุง
- **Error Handling**: ูุฏุฑุช ุฎุทุงูุง ุฌุงูุน
- **Logging**: ุณุณุชู ูุงฺฏโฺฏุฑ ูพุดุฑูุชู

## ๐๏ธ ูุนูุงุฑ ุณุณุชู

```
src/
โโโ app.js                 # ุชูุธูุงุช ุงุตู Express
โโโ config/               # ุชูุธูุงุช ูพุงฺฏุงู ุฏุงุฏู ู ุงุญุฑุงุฒ ููุช
โโโ controllers/          # ฺฉูุชุฑูุฑูุง API
โโโ middlewares/         # ูุฏูโูุฑูุง ุงููุช ู ุงุนุชุจุงุฑุณูุฌ
โโโ models/              # ูุฏูโูุง Prisma
โโโ routes/              # ูุณุฑูุง API
โโโ services/            # ุณุฑูุณโูุง WhatsApp ู WebSocket
โโโ utils/               # ุงุจุฒุงุฑูุง ฺฉูฺฉ
โโโ validators/          # ุงุนุชุจุงุฑุณูุฌ ูุฑูุฏโูุง
```

## ๐๏ธ ุชฺฉููููฺโูุง ุงุณุชูุงุฏู ุดุฏู

- **Backend**: Node.js, Express.js
- **Database**: MySQL ุจุง Prisma ORM
- **Authentication**: JWT, Passport.js
- **WhatsApp**: whatsapp-web.js
- **Real-time**: WebSocket
- **File Upload**: Multer
- **Validation**: Zod
- **Security**: Helmet, bcrypt

## ๐ ูพุดโูุงุฒูุง

- Node.js (v16 ุง ุจุงูุงุชุฑ)
- MySQL (v8 ุง ุจุงูุงุชุฑ)
- npm ุง yarn

## โ๏ธ ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### 1. ฺฉููู ฺฉุฑุฏู ูพุฑูฺู
```bash
git clone <repository-url>
cd whatsapp-messager
```

### 2. ูุตุจ ูุงุจุณุชฺฏโูุง
```bash
npm install
```

### 3. ุชูุธู ูุชุบุฑูุง ูุญุท
ูุงู `.env` ุฑุง ุงุฌุงุฏ ฺฉูุฏ:

```env
# Database
DATABASE_URL="mysql://username:password@localhost:3306/whatsapp_campaign"

# JWT
JWT_SECRET="your-jwt-secret"
JWT_REFRESH_SECRET="your-refresh-secret"

# Session
SESSION_SECRET="your-session-secret"

# Server
PORT=3000
NODE_ENV=development

# Frontend
FRONTEND_URL="http://localhost:3000"

# SMS Service (Kavenegar)
KAVENEGAR_API_KEY="your-kavenegar-api-key"

# Email
EMAIL_HOST="smtp.gmail.com"
EMAIL_PORT=587
EMAIL_USER="your-email@gmail.com"
EMAIL_PASS="your-email-password"
```

### 4. ุฑุงูโุงูุฏุงุฒ ูพุงฺฏุงู ุฏุงุฏู
```bash
# ุชููุฏ Prisma Client
npm run db:generate

# ุงุฌุฑุง ูุงฺฏุฑุดูโูุง
npm run db:migrate

# (ุงุฎุชุงุฑ) ูุดุงูุฏู ูพุงฺฏุงู ุฏุงุฏู
npm run db:studio
```

### 5. ุงุฌุฑุง ูพุฑูฺู
```bash
# ุญุงูุช ุชูุณุนู
npm run dev

# ุญุงูุช ุชููุฏ
npm start
```

## ๐ง ุงุณฺฉุฑูพุชโูุง ููุฏ

```bash
# ุจุฑุฑุณ ูุชุบุฑูุง ูุญุท
npm run check-env

# ุงุฌุงุฏ ฺฉุงุฑุจุฑ ุงุฏูู
npm run make-admin

# ุงุฌุฑุง ุชุณุชโูุง
npm test
npm run test:campaign
npm run test:whatsapp
npm run test:all
```

## ๐ API Documentation

### ุงุญุฑุงุฒ ููุช
- `POST /api/auth/request-otp` - ุฏุฑุฎูุงุณุช ฺฉุฏ OTP
- `POST /api/auth/verify-otp` - ุชุงุฏ ฺฉุฏ OTP

### ูุฏุฑุช ฺฉุงุฑุจุฑุงู
- `GET /api/user/profile` - ุฏุฑุงูุช ูพุฑููุงู ฺฉุงุฑุจุฑ
- `PUT /api/user/profile` - ุจูโุฑูุฒุฑุณุงู ูพุฑููุงู
- `POST /api/refresh/token` - ุชุงุฒูโุณุงุฒ ุชูฺฉู

### ูุฏุฑุช ฺฉููพูโูุง
- `POST /api/campaigns` - ุงุฌุงุฏ ฺฉููพู ุฌุฏุฏ
- `GET /api/campaigns` - ูุณุช ฺฉููพูโูุง ฺฉุงุฑุจุฑ
- `GET /api/campaigns/:id` - ุฌุฒุฆุงุช ฺฉููพู
- `POST /api/campaigns/:id/upload-recipients` - ุขูพููุฏ ูุณุช ูุฎุงุทุจู
- `POST /api/campaigns/:id/upload-attachment` - ุขูพููุฏ ูพูุณุช
- `POST /api/campaigns/:id/generate-qr` - ุชููุฏ QR Code
- `POST /api/campaigns/:id/start` - ุดุฑูุน ฺฉููพู
- `GET /api/campaigns/:id/status` - ูุถุนุช ฺฉููพู

### ูุฏุฑุช ูพฺฉุฌโูุง
- `GET /api/packages` - ูุณุช ูพฺฉุฌโูุง
- `GET /api/packages/:id` - ุฌุฒุฆุงุช ูพฺฉุฌ

### ูุฏุฑุช ุณูุงุฑุดุงุช
- `POST /api/orders` - ุงุฌุงุฏ ุณูุงุฑุด
- `GET /api/orders/me` - ุณูุงุฑุดุงุช ฺฉุงุฑุจุฑ

### ูุฏุฑุช ูพุฑุฏุงุฎุช
- `POST /api/payments/verify` - ุชุงุฏ ูพุฑุฏุงุฎุช
- `GET /api/payments/me` - ุชุงุฑุฎฺู ูพุฑุฏุงุฎุชโูุง

### ูพูู ุงุฏูู
- `GET /api/admin/users` - ูุณุช ฺฉุงุฑุจุฑุงู
- `GET /api/admin/transactions` - ูุณุช ุชุฑุงฺฉูุดโูุง
- `GET /api/admin/dashboard` - ุขูุงุฑ ุฏุงุดุจูุฑุฏ

## ๐ WebSocket Events

### ุงุชุตุงู
```javascript
const socket = io('ws://localhost:3000/ws/campaigns');
```

### ุฑูุฏุงุฏูุง ฺฉููพู
- `campaign_status` - ุจูโุฑูุฒุฑุณุงู ูุถุนุช ฺฉููพู
- `message_progress` - ูพุดุฑูุช ุงุฑุณุงู ูพุงู
- `connection_status` - ูุถุนุช ุงุชุตุงู WhatsApp

## ๐ฑ ุงุณุชูุงุฏู ุงุฒ WhatsApp

### 1. ุงุชุตุงู ุจู WhatsApp
```javascript
// ุชููุฏ QR Code
POST /api/campaigns/:id/generate-qr

// ุจุฑุฑุณ ูุถุนุช ุงุชุตุงู
GET /api/campaigns/:id/connection-status
```

### 2. ุดุฑูุน ฺฉููพู
```javascript
// ุดุฑูุน ุงุฑุณุงู ูพุงู
POST /api/campaigns/:id/start
```

### 3. ูุธุงุฑุช ุจุฑ ูพุดุฑูุช
```javascript
// ุฏุฑุงูุช ูุถุนุช ฺฉููพู
GET /api/campaigns/:id/status

// ุฏุฑุงูุช ุขูุงุฑ
GET /api/campaigns/:id/stats
```

## ๐งช ุชุณุชโูุง

### ุงุฌุฑุง ุชุณุชโูุง ฺฉุงูู
```bash
npm run test:all
```

### ุชุณุชโูุง ุฎุงุต
```bash
# ุชุณุช API ูุง ฺฉููพู
npm run test:campaign

# ุชุณุช ฺฉูพุงุฑฺฺฏ WhatsApp
npm run test:whatsapp
```

## ๐ ูุงูุชูุฑูฺฏ ู ูุงฺฏโูุง

### ูุงฺฏโูุง ุณุณุชู
- ุชูุงู ุฏุฑุฎูุงุณุชโูุง ุฏุฑ ูุงู ูุงฺฏ ุซุจุช ูโุดููุฏ
- ุฎุทุงูุง ุจุง ุฌุฒุฆุงุช ฺฉุงูู ูุงฺฏ ูโุดููุฏ
- ุขูุงุฑ ุนููฺฉุฑุฏ ุณุณุชู ูุงุจู ุฑุตุฏ ุงุณุช

### ูุงูุชูุฑูฺฏ ฺฉููพูโูุง
- ูุถุนุช ูุญุธูโุง ฺฉููพูโูุง
- ุขูุงุฑ ุงุฑุณุงู ู ุชุญูู ูพุงูโูุง
- ฺฏุฒุงุฑุดโูุง ุชูุตู ุนููฺฉุฑุฏ

## ๐ ุงููุช

### ุงูุฏุงูุงุช ุงููุช
- **Rate Limiting**: ูุญุฏูุฏุช 200 ุฏุฑุฎูุงุณุช ุฏุฑ 15 ุฏููู
- **Helmet**: ูุญุงูุธุช ุงุฒ ูุฏุฑูุง HTTP
- **CORS**: ฺฉูุชุฑู ุฏุณุชุฑุณ cross-origin
- **Input Validation**: ุงุนุชุจุงุฑุณูุฌ ฺฉุงูู ูุฑูุฏโูุง
- **Password Hashing**: ุฑูุฒูฺฏุงุฑ ุงูู ุฑูุฒ ุนุจูุฑ

### ุจูุชุฑู ุดููโูุง
- ุงุณุชูุงุฏู ุงุฒ ูุชุบุฑูุง ูุญุท ุจุฑุง ุงุทูุงุนุงุช ุญุณุงุณ
- ุงุนุชุจุงุฑุณูุฌ ุชูุงู ูุฑูุฏโูุง
- ูุงฺฏโฺฏุฑ ููุงุณุจ ุจุฑุง ุงููุช
- ุจูโุฑูุฒุฑุณุงู ููุธู ูุงุจุณุชฺฏโูุง

## ๐ ุงุณุชูุฑุงุฑ (Deployment)

### ูุชุบุฑูุง ูุญุท ุชููุฏ
```env
NODE_ENV=production
DATABASE_URL="mysql://user:pass@host:port/db"
JWT_SECRET="strong-secret"
SESSION_SECRET="strong-session-secret"
```

### ุฏุณุชูุฑุงุช ุงุณุชูุฑุงุฑ
```bash
# ูุตุจ ูุงุจุณุชฺฏโูุง
npm install --production

# ุงุฌุฑุง ูุงฺฏุฑุดูโูุง
npm run db:deploy

# ุดุฑูุน ุณุฑูุณ
npm start
```

## ๐ค ูุดุงุฑฺฉุช

1. Fork ฺฉูุฏ
2. ุดุงุฎู ุฌุฏุฏ ุงุฌุงุฏ ฺฉูุฏ (`git checkout -b feature/amazing-feature`)
3. ุชุบุฑุงุช ุฑุง commit ฺฉูุฏ (`git commit -m 'Add amazing feature'`)
4. Push ฺฉูุฏ (`git push origin feature/amazing-feature`)
5. Pull Request ุงุฌุงุฏ ฺฉูุฏ

## ๐ ูุฌูุฒ

ุงู ูพุฑูฺู ุชุญุช ูุฌูุฒ MIT ููุชุดุฑ ุดุฏู ุงุณุช.

## ๐ ูพุดุชุจุงู

ุจุฑุง ุณูุงูุงุช ู ูพุดุชุจุงู:
- ุงูู: support@example.com
- ุชูฺฏุฑุงู: @support_bot

## ๐ ุจูโุฑูุฒุฑุณุงูโูุง

### ูุณุฎู 1.0.0
- ุฑุงูโุงูุฏุงุฒ ุงููู ุณุณุชู
- ูพุดุชุจุงู ุงุฒ ฺฉููพูโูุง ูุงุชุณุงูพ
- ุณุณุชู ุงุญุฑุงุฒ ููุช OTP
- ูพูู ุงุฏูู ฺฉุงูู
- ฺฏุฒุงุฑุดโฺฏุฑ ูพุดุฑูุชู

---

**ูฺฉุชู**: ุงู ุณุณุชู ุจุฑุง ุงุณุชูุงุฏู ุชุฌุงุฑ ุทุฑุงุญ ุดุฏู ู ุชูุงู ูุงุจูุชโูุง ุงููุช ู ุจูููโุณุงุฒ ูุงุฒู ุฑุง ุฏุงุฑุง ูโุจุงุดุฏ.

# ๐ฑ Campaign 7-Step Flow

## ูุฑุขูุฏ 7 ูุฑุญููโุง ุงุฌุงุฏ ู ุงุฌุฑุง ฺฉููพู

### **๐ฏ ูุฑุงุญู ฺฉููพู:**

#### **ูุฑุญูู 1: ุชุนุฑู ฺฉููพู ู ูุชู ูพุงู**
- โ ุงุฌุงุฏ ฺฉููพู ุจุง ูุชู ูพุงู
- โ ูุถุนุช: `draft`

#### **ูุฑุญูู 2: ุขูพููุฏ ูุงู ุงฺฉุณู ุจุฑุง ูุฑ ฺฉููพู**
- โ ุขูพููุฏ ูุงู Excel ุจุง ุดูุงุฑูโูุง ุชููู
- โ ูุถุนุช: `ready`

#### **ูุฑุญูู 3: ุงูุฒูุฏู ูุงู ุถููู ุณุฑุงุณุฑ (ุงุฎุชุงุฑ)**
- โ ุขูพููุฏ ูุงู ุถููู (ุชุตูุฑุ PDFุ ...)
- โ ุงุฑุณุงู ุจู ููุฑุงู ูพุงู ุจุฑุง ููู

#### **ูุฑุญูู 4: ุชูุธูุงุช ูููู ุงุฑุณุงู**
- โ ุงูุชุฎุงุจ ูุงุตูู ุงุฑุณุงู (5s, 10s, 20s)
- โ ุขูุงุฏู ุจุฑุง ุงุชุตุงู WhatsApp

#### **ูุฑุญูู 5: ุงุชุตุงู ุญุณุงุจ WhatsApp**
- โ ุชููุฏ QR ฺฉุฏ
- โ ุงุณฺฉู QR ฺฉุฏ ุจุง ฺฏูุด
- โ ุงุชุตุงู ูููู

#### **ูุฑุญูู 6: ุฏุฑ ุญุงู ุงุฑุณุงู ูพุงูโูุง**
- โ ุดุฑูุน ุงุฑุณุงู
- โ ููุงุด ูพุดุฑูุช real-time
- โ ูุถุนุช: `running`

#### **ูุฑุญูู 7: ูุดุงู ุฏุงุฏู ฺฏุฒุงุฑุด ููุง**
- โ ุชฺฉูู ุงุฑุณุงู
- โ ฺฏุฒุงุฑุด ฺฉุงูู
- โ ูุถุนุช: `completed`

---

## ๐ง API Endpoints ุจุฑุง ูุฑ ูุฑุญูู:

### **ูุฑุญูู 1: ุชุนุฑู ฺฉููพู**
```bash
POST /api/campaigns
{
  "message": "ุณูุงู! ูพุดููุงุฏ ูฺู ุจุฑุง ุดูุง..."
}
```

### **ูุฑุญูู 2: ุขูพููุฏ ฺฏุฑูุฏฺฏุงู**
```bash
POST /api/campaigns/:campaignId/recipients
# multipart/form-data with Excel file
```

### **ูุฑุญูู 3: ุขูพููุฏ ุถููู**
```bash
POST /api/campaigns/:campaignId/attachment
# multipart/form-data with file
```

### **ูุฑุญูู 4: ุชูุธู ูููู**
```bash
PUT /api/campaigns/:campaignId/interval
{
  "interval": "10s"
}
```

### **ูุฑุญูู 5: ุงุชุตุงู WhatsApp**
```bash
POST /api/campaigns/:campaignId/qr-code
GET /api/campaigns/:campaignId/connection
```

### **ูุฑุญูู 6: ุดุฑูุน ุงุฑุณุงู**
```bash
POST /api/campaigns/:campaignId/start
GET /api/campaigns/:campaignId/progress
```

### **ูุฑุญูู 7: ฺฏุฒุงุฑุด ููุง**
```bash
GET /api/campaigns/:campaignId/report
GET /api/campaigns/:campaignId/report/download
```

---

## ๐ ูุถุนุชโูุง ฺฉููพู:

| ูุถุนุช | ุชูุถุญ | ูุฑุญูู |
|-------|-------|--------|
| `draft` | ฺฉููพู ุงุฌุงุฏ ุดุฏู | 1 |
| `ready` | ฺฏุฑูุฏฺฏุงู ุขูพููุฏ ุดุฏูุฏ | 2 |
| `ready` | ุถููู ุขูพููุฏ ุดุฏ (ุงุฎุชุงุฑ) | 3 |
| `ready` | ูููู ุชูุธู ุดุฏ | 4 |
| `ready` | WhatsApp ูุชุตู ุดุฏ | 5 |
| `running` | ุฏุฑ ุญุงู ุงุฑุณุงู | 6 |
| `completed` | ุชฺฉูู ุดุฏู | 7 |

---

## ๐ฎ UI Flow:

### **ุตูุญู 1: ุชุนุฑู ฺฉููพู**
- ููุฏ ูุชู ูพุงู
- ุฏฺฉูู "ุงุฏุงูู"

### **ุตูุญู 2: ุขูพููุฏ ฺฏุฑูุฏฺฏุงู**
- ุขูพููุฏ ูุงู Excel
- ูพุดโููุงุด ฺฏุฑูุฏฺฏุงู
- ุฏฺฉูู "ุงุฏุงูู"

### **ุตูุญู 3: ุถููู (ุงุฎุชุงุฑ)**
- ุขูพููุฏ ูุงู ุถููู
- ุฏฺฉูู "ุงุฏุงูู" ุง "ุฑุฏ ฺฉุฑุฏู"

### **ุตูุญู 4: ุชูุธู ูููู**
- ุงูุชุฎุงุจ ูุงุตูู (5s, 10s, 20s)
- ุฏฺฉูู "ุงุฏุงูู"

### **ุตูุญู 5: ุงุชุตุงู WhatsApp**
- ููุงุด QR ฺฉุฏ
- ุฑุงูููุง ุงุณฺฉู
- ุฏฺฉูู "ุจุฑุฑุณ ุงุชุตุงู"

### **ุตูุญู 6: ุงุฑุณุงู**
- ููุงุด ูพุดุฑูุช
- ุฏฺฉูู "ุชููู" (ุงุฎุชุงุฑ)
- ููุงุด ุขูุงุฑ real-time

### **ุตูุญู 7: ฺฏุฒุงุฑุด**
- ุขูุงุฑ ููุง
- ุฏฺฉูู "ุฏุงูููุฏ ฺฏุฒุงุฑุด"
- ุฏฺฉูู "ฺฉููพู ุฌุฏุฏ"

---

## ๐ WebSocket Events:

### **ูุฑุญูู 5: ุงุชุตุงู WhatsApp**
```json
{
  "type": "qr_code",
  "campaignId": "campaign_id",
  "qrCode": "data:image/png;base64,..."
}
```

### **ูุฑุญูู 6: ูพุดุฑูุช ุงุฑุณุงู**
```json
{
  "type": "progress",
  "campaignId": "campaign_id",
  "data": {
    "sent": 45,
    "total": 150,
    "current": "09120000000"
  }
}
```

### **ูุฑุญูู 7: ุชฺฉูู**
```json
{
  "type": "completion",
  "campaignId": "campaign_id",
  "data": {
    "status": "completed",
    "totalSent": 148,
    "totalFailed": 2
  }
}
```

---

## โ ูุฒุงุง ุงู ูุฑุขูุฏ:

1. **ููุทู:** ูุฑ ูุฑุญูู ูุงุจุณุชู ุจู ูุฑุญูู ูุจู ุงุณุช
2. **ฺฉุงุฑุจุฑูพุณูุฏ:** UI ุณุงุฏู ู ูุงุจู ููู
3. **ุงูุนุทุงู:** ุงูฺฉุงู ุจุงุฒฺฏุดุช ุจู ูุฑุงุญู ูุจู
4. **ฺฉูุชุฑู:** ฺฉุงุฑุจุฑ ฺฉูุชุฑู ฺฉุงูู ุฏุงุฑุฏ
5. **ุดูุงู:** ูุถุนุช ฺฉููพู ููุดู ูุดุฎุต ุงุณุช

---

## ๐ฏ ูุชุฌู:

ุงู ูุฑุขูุฏ 7 ูุฑุญููโุง ฺฉุงููุงู ููุทู ู ฺฉุงุฑุจุฑูพุณูุฏ ุงุณุช ู API ููุฌูุฏ ุงุฒ ุขู ูพุดุชุจุงู ูโฺฉูุฏ!
